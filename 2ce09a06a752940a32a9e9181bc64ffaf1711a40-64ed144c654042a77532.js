(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"/wHA":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));r("E5k/");var a=r("lHlH");function n(t,e,r){var n=r.removedProps,i=void 0===n?{}:n,s=r.deprecatedProps,o=void 0===s?{}:s,u=r.replacedProps,c=void 0===u?{}:u;for(var f in i)if(f in e){var h=i[f]?t+"."+i[f]:"N/A";a.f.removed(t+"."+f,h)()}for(var l in o)if(l in e){var d=o[l];a.f.deprecated(t+"."+l,t+"."+d)()}var g=null;for(var E in c)if(E in e){var b=c[E];a.f.deprecated(t+"."+E,t+"."+b)(),(g=g||Object.assign({},e))[b]=e[E],delete g[E]}return g||e}},"2aL3":function(t,e,r){"use strict";r.d(e,"a",(function(){return s}));var a,n=r("mECX"),i=r("2urO"),s={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};e.b=((a={})[s.WEBGL2]=[!1,!0],a[s.VERTEX_ARRAY_OBJECT]=["OES_vertex_array_object",!0],a[s.TIMER_QUERY]=["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],a[s.INSTANCED_RENDERING]=["ANGLE_instanced_arrays",!0],a[s.MULTIPLE_RENDER_TARGETS]=["WEBGL_draw_buffers",!0],a[s.ELEMENT_INDEX_UINT32]=["OES_element_index_uint",!0],a[s.BLEND_EQUATION_MINMAX]=["EXT_blend_minmax",!0],a[s.FLOAT_BLEND]=["EXT_float_blend"],a[s.COLOR_ENCODING_SRGB]=["EXT_sRGB",!0],a[s.TEXTURE_DEPTH]=["WEBGL_depth_texture",!0],a[s.TEXTURE_FLOAT]=["OES_texture_float",!0],a[s.TEXTURE_HALF_FLOAT]=["OES_texture_half_float",!0],a[s.TEXTURE_FILTER_LINEAR_FLOAT]=["OES_texture_float_linear"],a[s.TEXTURE_FILTER_LINEAR_HALF_FLOAT]=["OES_texture_half_float_linear"],a[s.TEXTURE_FILTER_ANISOTROPIC]=["EXT_texture_filter_anisotropic"],a[s.COLOR_ATTACHMENT_RGBA32F]=[function(t){var e,r=new i.a(t,{format:t.RGBA,type:t.FLOAT,dataFormat:t.RGBA}),a=new n.a(t,{id:"test-framebuffer",check:!1,attachments:(e={},e[t.COLOR_ATTACHMENT0]=r,e)}),s=a.getStatus();return r.delete(),a.delete(),s===t.FRAMEBUFFER_COMPLETE},"EXT_color_buffer_float"],a[s.COLOR_ATTACHMENT_FLOAT]=[!1,"EXT_color_buffer_float"],a[s.COLOR_ATTACHMENT_HALF_FLOAT]=["EXT_color_buffer_half_float"],a[s.GLSL_FRAG_DATA]=["WEBGL_draw_buffers",!0],a[s.GLSL_FRAG_DEPTH]=["EXT_frag_depth",!0],a[s.GLSL_DERIVATIVES]=["OES_standard_derivatives",!0],a[s.GLSL_TEXTURE_LOD]=["EXT_shader_texture_lod",!0],a)},"2urO":function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));r("ofTv"),r("E5k/"),r("6kNP"),r("8npG");var a=r("73Rc"),n=r("rfXe"),i=r("3dIF"),s=r("HOtY");var o=function(t){var e,r;function o(e,r){var n;return void 0===r&&(r={}),Object(i.b)(e),(r instanceof Promise||"string"==typeof r)&&(r={data:r}),"string"==typeof r.data&&(r=Object.assign({},r,{data:Object(s.a)(r.data)})),(n=t.call(this,e,Object.assign({},r,{target:a.a.TEXTURE_2D}))||this).initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,o.isSupported=function(t,e){return n.a.isSupported(t,e)},o}(n.a)},"3LCa":function(t,e,r){"use strict";r.d(e,"a",(function(){return E}));r("5irr"),r("E5k/"),r("YBKJ"),r("9ZhD"),r("ofTv");var a=r("73Rc"),n=r("98Cc"),i=r("YJ55"),s=r("3dIF"),o=r("UBYz"),u=r("lHlH"),c=r("/wHA"),f=r("Iq2B");function h(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var l={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},d={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:l},g={removedProps:l},E=function(t){var e,r;function n(e,r){var n;return void 0===r&&(r={}),(n=t.call(this,e,r)||this).stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=r.target||(n.gl.webgl2?a.a.COPY_READ_BUFFER:a.a.ARRAY_BUFFER),n.initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var l,E,b,_=n.prototype;return _.getElementCount=function(t){return void 0===t&&(t=this.accessor),Math.round(this.byteLength/i.a.getBytesPerElement(t))},_.getVertexCount=function(t){return void 0===t&&(t=this.accessor),Math.round(this.byteLength/i.a.getBytesPerVertex(t))},_.initialize=function(t){return void 0===t&&(t={}),ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Object(c.a)("Buffer",t,d),this.usage=t.usage||a.a.STATIC_DRAW,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this},_.setProps=function(t){return"accessor"in(t=Object(c.a)("Buffer",t,g))&&this.setAccessor(t.accessor),this},_.setAccessor=function(t){return delete(t=Object.assign({},t)).buffer,this.accessor=new i.a(t),this},_.reallocate=function(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)},_.setData=function(t){return this.initialize(t)},_.subData=function(t){ArrayBuffer.isView(t)&&(t={data:t});var e=t,r=e.data,n=e.offset,i=void 0===n?0:n,o=e.srcOffset,u=void 0===o?0:o,c=t.byteLength||t.length;Object(f.a)(r);var h=this.gl.webgl2?a.a.COPY_WRITE_BUFFER:this.target;return this.gl.bindBuffer(h,this.handle),0!==u||void 0!==c?(Object(s.a)(this.gl),this.gl.bufferSubData(this.target,i,r,u,c)):this.gl.bufferSubData(h,i,r),this.gl.bindBuffer(h,null),this.debugData=null,this._inferType(r),this},_.copyData=function(t){var e=t.sourceBuffer,r=t.readOffset,n=void 0===r?0:r,i=t.writeOffset,o=void 0===i?0:i,u=t.size,c=this.gl;return Object(s.a)(c),c.bindBuffer(a.a.COPY_READ_BUFFER,e.handle),c.bindBuffer(a.a.COPY_WRITE_BUFFER,this.handle),c.copyBufferSubData(a.a.COPY_READ_BUFFER,a.a.COPY_WRITE_BUFFER,n,o,u),c.bindBuffer(a.a.COPY_READ_BUFFER,null),c.bindBuffer(a.a.COPY_WRITE_BUFFER,null),this.debugData=null,this},_.getData=function(t){var e=void 0===t?{}:t,r=e.dstData,n=void 0===r?null:r,i=e.srcByteOffset,u=void 0===i?0:i,c=e.dstOffset,h=void 0===c?0:c,l=e.length,d=void 0===l?0:l;Object(s.a)(this.gl);var g,E,b=Object(o.c)(this.accessor.type||a.a.FLOAT,{clamped:!1}),_=this._getAvailableElementCount(u),v=h;n?g=(E=n.length)-v:E=v+(g=Math.min(_,d||_));var m=Math.min(_,g);return d=d||m,Object(f.a)(d<=m),n=n||new b(E),this.gl.bindBuffer(a.a.COPY_READ_BUFFER,this.handle),this.gl.getBufferSubData(a.a.COPY_READ_BUFFER,u,n,h,d),this.gl.bindBuffer(a.a.COPY_READ_BUFFER,null),n},_.bind=function(t){var e=void 0===t?{}:t,r=e.target,n=void 0===r?this.target:r,i=e.index,s=void 0===i?this.accessor&&this.accessor.index:i,o=e.offset,u=void 0===o?0:o,c=e.size;return n===a.a.UNIFORM_BUFFER||n===a.a.TRANSFORM_FEEDBACK_BUFFER?void 0!==c?this.gl.bindBufferRange(n,s,this.handle,u,c):(Object(f.a)(0===u),this.gl.bindBufferBase(n,s,this.handle)):this.gl.bindBuffer(n,this.handle),this},_.unbind=function(t){var e=void 0===t?{}:t,r=e.target,n=void 0===r?this.target:r,i=e.index,s=void 0===i?this.accessor&&this.accessor.index:i;return n===a.a.UNIFORM_BUFFER||n===a.a.TRANSFORM_FEEDBACK_BUFFER?this.gl.bindBufferBase(n,s,null):this.gl.bindBuffer(n,null),this},_.getDebugData=function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(10,this.byteLength)}),{data:this.debugData,changed:!0})},_.invalidateDebugData=function(){this.debugData=null},_._setData=function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.byteLength+e),Object(f.a)(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();var a=this._getTarget();this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,r,this.usage),this.gl.bufferSubData(a,e,t),this.gl.bindBuffer(a,null),this.debugData=t.slice(0,10),this.bytesUsed=r,this._trackAllocatedMemory(r);var n=Object(o.b)(t);return Object(f.a)(n),this.setAccessor(new i.a(this.accessor,{type:n})),this},_._setByteLength=function(t,e){void 0===e&&(e=this.usage),Object(f.a)(t>=0),this._trackDeallocatedMemory();var r=t;0===t&&(r=new Float32Array(0));var a=this._getTarget();return this.gl.bindBuffer(a,this.handle),this.gl.bufferData(a,r,e),this.gl.bindBuffer(a,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this},_._getTarget=function(){return this.gl.webgl2?a.a.COPY_WRITE_BUFFER:this.target},_._getAvailableElementCount=function(t){var e=t/Object(o.c)(this.accessor.type||a.a.FLOAT,{clamped:!1}).BYTES_PER_ELEMENT;return this.getElementCount()-e},_._inferType=function(t){this.accessor.type||this.setAccessor(new i.a(this.accessor,{type:Object(o.b)(t)}))},_._createHandle=function(){return this.gl.createBuffer()},_._deleteHandle=function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()},_._getParameter=function(t){this.gl.bindBuffer(this.target,this.handle);var e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e},_.setByteLength=function(t){return u.f.deprecated("setByteLength","reallocate")(),this.reallocate(t)},_.updateAccessor=function(t){return u.f.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new i.a(this.accessor,t),this},l=n,(E=[{key:"type",get:function(){return u.f.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return u.f.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}])&&h(l.prototype,E),b&&h(l,b),n}(n.a)},"3dIF":function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return s}));var a=r("Iq2B"),n=r("lHlH");function i(t){Object(a.a)(Object(n.d)(t),"Invalid WebGLRenderingContext")}function s(t){Object(a.a)(Object(n.e)(t),"Requires WebGL2")}},"62vL":function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}));r("sC2a"),r("YBKJ");var a=r("Iq2B");function n(t,e){if("string"!=typeof e)return e;var r=Number(e);if(!isNaN(r))return r;var n=t[e=e.replace(/^.*\./,"")];return Object(a.a)(void 0!==n,"Accessing undefined constant GL."+e),n}function i(t,e){for(var r in e=Number(e),t)if(t[r]===e)return"GL."+r;return String(e)}},"7rsd":function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var a=r("lHlH");function n(t,e,r,n){var i="See luma.gl "+r+" Upgrade Guide at https://luma.gl/docs/upgrade-guide",s=Object.getPrototypeOf(t);n.forEach((function(t){s.methodName||(s[t]=function(){throw a.f.removed("Calling removed method "+e+"."+t+": ",i)(),new Error(t)})}))}},"88iX":function(t,e,r){r("Sc3u")("Int8",1,(function(t){return function(e,r,a){return t(this,e,r,a)}}))},"98Cc":function(t,e,r){"use strict";r.d(e,"a",(function(){return g}));r("Dq+y"),r("Ggvi"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("8npG"),r("rzGZ"),r("m210"),r("4DPX");var a=r("lHlH"),n=r("JR+K"),i=r("3dIF"),s=r("62vL"),o=r("BunF"),u=r("Iq2B"),c=r("7rsd");function f(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function l(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var d="Resource subclass must define virtual methods",g=function(){function t(t,e){void 0===e&&(e={}),Object(i.b)(t);var r=e,a=r.id,n=r.userData,s=void 0===n?{}:n;this.gl=t,this.id=a||Object(o.c)(this.constructor.name),this.userData=s,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}var e,r,h,g=t.prototype;return g.toString=function(){return this.constructor.name+"("+this.id+")"},g.delete=function(t){var e=(void 0===t?{}:t).deleteChildren,r=void 0!==e&&e,a=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,a&&r&&a.filter(Boolean).forEach((function(t){t.delete()})),this},g.bind=function(t){return void 0===t&&(t=this.handle),"function"!=typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e);var e},g.unbind=function(){this.bind(null)},g.getParameter=function(t,e){void 0===e&&(e={}),t=Object(s.b)(this.gl,t),Object(u.a)(t);var r=(this.constructor.PARAMETERS||{})[t];if(r){var n=Object(a.e)(this.gl);if(!((!("webgl2"in r)||n)&&(!("extension"in r)||this.gl.getExtension(r.extension)))){var i=r.webgl1,o="webgl2"in r?r.webgl2:r.webgl1;return n?o:i}}return this._getParameter(t,e)},g.getParameters=function(t){void 0===t&&(t={});for(var e,r={},n=r.parameters,i=r.keys,o=this.constructor.PARAMETERS||{},u=Object(a.e)(this.gl),c={},h=f(n||Object.keys(o));!(e=h()).done;){var l=e.value,d=o[l];if(d&&(!("webgl2"in d)||u)&&(!("extension"in d)||this.gl.getExtension(d.extension))){var g=i?Object(s.a)(this.gl,l):l;c[g]=this.getParameter(l,t),i&&"GLenum"===d.type&&(c[g]=Object(s.a)(this.gl,c[g]))}}return c},g.setParameter=function(t,e){t=Object(s.b)(this.gl,t),Object(u.a)(t);var r=(this.constructor.PARAMETERS||{})[t];if(r){var n=Object(a.e)(this.gl);if(!((!("webgl2"in r)||n)&&(!("extension"in r)||this.gl.getExtension(r.extension))))throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(e=Object(s.b)(e))}return this._setParameter(t,e),this},g.setParameters=function(t){for(var e in t)this.setParameter(e,t[e]);return this},g.stubRemovedMethods=function(t,e,r){return Object(c.a)(this,t,e,r)},g.initialize=function(t){},g._createHandle=function(){throw new Error(d)},g._deleteHandle=function(){throw new Error(d)},g._bindHandle=function(){throw new Error(d)},g._getOptsFromHandle=function(){throw new Error(d)},g._getParameter=function(t,e){throw new Error(d)},g._setParameter=function(t,e){throw new Error(d)},g._context=function(){return this.gl.luma=this.gl.luma||{},this.gl.luma},g._addStats=function(){var t=this.constructor.name,e=n.a.get("Resource Counts");e.get("Resources Created").incrementCount(),e.get(t+"s Created").incrementCount(),e.get(t+"s Active").incrementCount()},g._removeStats=function(){var t=this.constructor.name;n.a.get("Resource Counts").get(t+"s Active").decrementCount()},g._trackAllocatedMemory=function(t,e){void 0===e&&(e=this.constructor.name);var r=n.a.get("Memory Usage");r.get("GPU Memory").addCount(t),r.get(e+" Memory").addCount(t),this.byteLength=t},g._trackDeallocatedMemory=function(t){void 0===t&&(t=this.constructor.name);var e=n.a.get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get(t+" Memory").subtractCount(this.byteLength),this.byteLength=0},e=t,(r=[{key:"handle",get:function(){return this._handle}}])&&l(e.prototype,r),h&&l(e,h),t}()},AFhB:function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"a",(function(){return c})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return h})),r.d(e,"e",(function(){return l}));var a,n,i,s=r("73Rc"),o=r("lHlH"),u=((a={})[s.a.RGB]={dataFormat:s.a.RGB,types:[s.a.UNSIGNED_BYTE,s.a.UNSIGNED_SHORT_5_6_5]},a[s.a.RGBA]={dataFormat:s.a.RGBA,types:[s.a.UNSIGNED_BYTE,s.a.UNSIGNED_SHORT_4_4_4_4,s.a.UNSIGNED_SHORT_5_5_5_1]},a[s.a.ALPHA]={dataFormat:s.a.ALPHA,types:[s.a.UNSIGNED_BYTE]},a[s.a.LUMINANCE]={dataFormat:s.a.LUMINANCE,types:[s.a.UNSIGNED_BYTE]},a[s.a.LUMINANCE_ALPHA]={dataFormat:s.a.LUMINANCE_ALPHA,types:[s.a.UNSIGNED_BYTE]},a[s.a.R32F]={dataFormat:s.a.RED,types:[s.a.FLOAT],gl2:!0},a[s.a.RG32F]={dataFormat:s.a.RG,types:[s.a.FLOAT],gl2:!0},a[s.a.RGB32F]={dataFormat:s.a.RGB,types:[s.a.FLOAT],gl2:!0},a[s.a.RGBA32F]={dataFormat:s.a.RGBA,types:[s.a.FLOAT],gl2:!0},a),c=((n={})[s.a.RED]=1,n[s.a.RED_INTEGER]=1,n[s.a.RG]=2,n[s.a.RG_INTEGER]=2,n[s.a.RGB]=3,n[s.a.RGB_INTEGER]=3,n[s.a.RGBA]=4,n[s.a.RGBA_INTEGER]=4,n[s.a.DEPTH_COMPONENT]=1,n[s.a.DEPTH_STENCIL]=1,n[s.a.ALPHA]=1,n[s.a.LUMINANCE]=1,n[s.a.LUMINANCE_ALPHA]=2,n),f=((i={})[s.a.FLOAT]=4,i[s.a.UNSIGNED_INT]=4,i[s.a.INT]=4,i[s.a.UNSIGNED_SHORT]=2,i[s.a.SHORT]=2,i[s.a.HALF_FLOAT]=2,i[s.a.BYTE]=1,i[s.a.UNSIGNED_BYTE]=1,i);function h(t,e){var r=u[e];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;var a=Object(o.e)(t)&&r.gl2||r.gl1;return"string"==typeof a?t.getExtension(a):a}function l(t,e){var r=u[e];switch(r&&r.types[0]){case s.a.FLOAT:return t.getExtension("OES_texture_float_linear");case s.a.HALF_FLOAT:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},AItV:function(t,e,r){r("Sc3u")("Int16",2,(function(t){return function(e,r,a){return t(this,e,r,a)}}))},BunF:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"b",(function(){return s})),r.d(e,"a",(function(){return o}));var a=r("Iq2B"),n={};function i(t){return void 0===t&&(t="id"),n[t]=n[t]||1,t+"-"+n[t]++}function s(t){return Object(a.a)("number"==typeof t,"Input must be a number"),t&&0==(t&t-1)}function o(t){var e=!0;for(var r in t){e=!1;break}return e}},EpVc:function(t,e,r){"use strict";r.d(e,"b",(function(){return c})),r.d(e,"a",(function(){return f}));r("9ZhD"),r("YBKJ"),r("m5Zt");var a=r("73Rc"),n=(r("3LCa"),r("mECX")),i=(r("rfXe"),r("lHlH"),r("3dIF"),r("UBYz")),s=r("Iq2B");function o(t){switch(t){case a.a.ALPHA:case a.a.R32F:case a.a.RED:return 1;case a.a.RG32F:case a.a.RG:return 2;case a.a.RGB:case a.a.RGB32F:return 3;case a.a.RGBA:case a.a.RGBA32F:return 4;default:return Object(s.a)(!1),0}}var u=r("kgJN");function c(t,e){var r=void 0===e?{}:e,n=r.sourceX,u=void 0===n?0:n,c=r.sourceY,f=void 0===c?0:c,l=r.sourceFormat,d=void 0===l?a.a.RGBA:l,g=r.sourceAttachment,E=void 0===g?a.a.COLOR_ATTACHMENT0:g,b=r.target,_=void 0===b?null:b,v=r.sourceWidth,m=r.sourceHeight,A=r.sourceType,T=h(t),p=T.framebuffer,R=T.deleteFramebuffer;Object(s.a)(p);var y=p.gl,F=p.handle,O=p.attachments;v=v||p.width,m=m||p.height,E===a.a.COLOR_ATTACHMENT0&&null===F&&(E=a.a.FRONT),Object(s.a)(O[E]),_=function(t,e,r,n,s){if(t)return t;e=e||a.a.UNSIGNED_BYTE;var u=Object(i.c)(e,{clamped:!1}),c=o(r);return new u(n*s*c)}(_,A=A||O[E].type,d,v,m),A=A||Object(i.b)(_);var I=y.bindFramebuffer(a.a.FRAMEBUFFER,F);return y.readPixels(u,f,v,m,d,A,_),y.bindFramebuffer(a.a.FRAMEBUFFER,I||null),R&&p.delete(),_}function f(t,e){for(var r=void 0===e?{}:e,n=r.sourceAttachment,s=void 0===n?a.a.COLOR_ATTACHMENT0:n,o=r.targetMaxHeight,u=void 0===o?Number.MAX_SAFE_INTEGER:o,f=c(t,{sourceAttachment:s}),h=t.width,l=t.height;l>u;){var d=Object(i.d)({data:f,width:h,height:l});f=d.data,h=d.width,l=d.height}Object(i.a)({data:f,width:h,height:l});var g=document.createElement("canvas");g.width=h,g.height=l;var E=g.getContext("2d"),b=E.createImageData(h,l);return b.data.set(f),E.putImageData(b,0,0),g.toDataURL()}function h(t){return t instanceof n.a?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:Object(u.b)(t),deleteFramebuffer:!0}}},HOSt:function(t,e,r){r("Sc3u")("Uint8",1,(function(t){return function(e,r,a){return t(this,e,r,a)}}),!0)},IObG:function(t,e,r){"use strict";r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return o}));r("5irr"),r("SIeT"),r("6nXr");var a=r("lHlH"),n=r("3dIF"),i=r("Iq2B");function s(t,e){var r=void 0===e?{}:e,n=r.framebuffer,s=void 0===n?null:n,o=r.color,u=void 0===o?null:o,c=r.depth,f=void 0===c?null:c,h=r.stencil,l=void 0===h?null:h,d={};s&&(d.framebuffer=s);var g=0;u&&(g|=16384,!0!==u&&(d.clearColor=u)),f&&(g|=256,!0!==f&&(d.clearDepth=f)),l&&(g|=1024,!0!==f&&(d.clearStencil=f)),Object(i.a)(0!==g,"clear: bad arguments"),Object(a.k)(t,d,(function(){t.clear(g)}))}function o(t,e){var r=void 0===e?{}:e,s=r.framebuffer,o=void 0===s?null:s,u=r.buffer,c=void 0===u?6144:u,f=r.drawBuffer,h=void 0===f?0:f,l=r.value,d=void 0===l?[0,0,0,0]:l;Object(n.a)(t),Object(a.k)(t,{framebuffer:o},(function(){switch(c){case 6144:switch(d.constructor){case Int32Array:t.clearBufferiv(c,h,d);break;case Uint32Array:t.clearBufferuiv(c,h,d);break;case Float32Array:default:t.clearBufferfv(c,h,d)}break;case 6145:t.clearBufferfv(6145,0,[d]);break;case 6146:t.clearBufferiv(6146,0,[d]);break;case 34041:var e=d[0],r=d[1];t.clearBufferfi(34041,0,e,r);break;default:Object(i.a)(!1,"clear: bad arguments")}}))}},Ifu7:function(t,e,r){"use strict";r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return u}));var a,n=r("Iq2B"),i=((a={})[5126]=[5126,1,"float"],a[35664]=[5126,2,"vec2"],a[35665]=[5126,3,"vec3"],a[35666]=[5126,4,"vec4"],a[5124]=[5124,1,"int"],a[35667]=[5124,2,"ivec2"],a[35668]=[5124,3,"ivec3"],a[35669]=[5124,4,"ivec4"],a[5125]=[5125,1,"uint"],a[36294]=[5125,2,"uvec2"],a[36295]=[5125,3,"uvec3"],a[36296]=[5125,4,"uvec4"],a[35670]=[5126,1,"bool"],a[35671]=[5126,2,"bvec2"],a[35672]=[5126,3,"bvec3"],a[35673]=[5126,4,"bvec4"],a[35674]=[5126,8,"mat2"],a[35685]=[5126,8,"mat2x3"],a[35686]=[5126,8,"mat2x4"],a[35675]=[5126,12,"mat3"],a[35687]=[5126,12,"mat3x2"],a[35688]=[5126,12,"mat3x4"],a[35676]=[5126,16,"mat4"],a[35689]=[5126,16,"mat4x2"],a[35690]=[5126,16,"mat4x3"],a);function s(t){switch(t){case 0:return 0;case 1:case 3:case 2:return 1;case 4:case 5:case 6:return 4;default:return Object(n.a)(!1),0}}function o(t){var e=i[t];return e?{type:e[0],components:e[1]}:null}function u(t,e){switch(t){case 5120:case 5121:case 5122:case 5123:t=5126}for(var r in i){var a=i[r],n=a[0],s=a[1],o=a[2];if(n===t&&s===e)return{glType:r,name:o}}return null}},Kb1d:function(t,e,r){var a=r("P8UN");a(a.P,"Array",{copyWithin:r("cRJv")}),r("Dq1/")("copyWithin")},KcFQ:function(t,e,r){"use strict";r.d(e,"a",(function(){return f}));r("ofTv");var a,n=r("73Rc"),i=r("98Cc"),s="EXT_color_buffer_float",o=((a={})[n.a.DEPTH_COMPONENT16]={bpp:2},a[n.a.DEPTH_COMPONENT24]={gl2:!0,bpp:3},a[n.a.DEPTH_COMPONENT32F]={gl2:!0,bpp:4},a[n.a.STENCIL_INDEX8]={bpp:1},a[n.a.DEPTH_STENCIL]={bpp:4},a[n.a.DEPTH24_STENCIL8]={gl2:!0,bpp:4},a[n.a.DEPTH32F_STENCIL8]={gl2:!0,bpp:5},a[n.a.RGBA4]={bpp:2},a[n.a.RGB565]={bpp:2},a[n.a.RGB5_A1]={bpp:2},a[n.a.R8]={gl2:!0,bpp:1},a[n.a.R8UI]={gl2:!0,bpp:1},a[n.a.R8I]={gl2:!0,bpp:1},a[n.a.R16UI]={gl2:!0,bpp:2},a[n.a.R16I]={gl2:!0,bpp:2},a[n.a.R32UI]={gl2:!0,bpp:4},a[n.a.R32I]={gl2:!0,bpp:4},a[n.a.RG8]={gl2:!0,bpp:2},a[n.a.RG8UI]={gl2:!0,bpp:2},a[n.a.RG8I]={gl2:!0,bpp:2},a[n.a.RG16UI]={gl2:!0,bpp:4},a[n.a.RG16I]={gl2:!0,bpp:4},a[n.a.RG32UI]={gl2:!0,bpp:8},a[n.a.RG32I]={gl2:!0,bpp:8},a[n.a.RGB8]={gl2:!0,bpp:3},a[n.a.RGBA8]={gl2:!0,bpp:4},a[n.a.RGB10_A2]={gl2:!0,bpp:4},a[n.a.RGBA8UI]={gl2:!0,bpp:4},a[n.a.RGBA8I]={gl2:!0,bpp:4},a[n.a.RGB10_A2UI]={gl2:!0,bpp:4},a[n.a.RGBA16UI]={gl2:!0,bpp:8},a[n.a.RGBA16I]={gl2:!0,bpp:8},a[n.a.RGBA32I]={gl2:!0,bpp:16},a[n.a.RGBA32UI]={gl2:!0,bpp:16},a[n.a.R16F]={gl2:s,bpp:2},a[n.a.RG16F]={gl2:s,bpp:4},a[n.a.RGBA16F]={gl2:s,bpp:8},a[n.a.R32F]={gl2:s,bpp:4},a[n.a.RG32F]={gl2:s,bpp:8},a[n.a.RGBA32F]={gl2:s,bpp:16},a[n.a.R11F_G11F_B10F]={gl2:s,bpp:4},a),u=r("lHlH"),c=r("Iq2B");var f=function(t){var e,r;function a(e,r){var a;return void 0===r&&(r={}),(a=t.call(this,e,r)||this).initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,a.isSupported=function(t,e){var r=(void 0===e?{format:null}:e).format;return!r||function(t,e,r){var a=r[e];if(!a)return!1;var n=Object(u.e)(t)&&a.gl2||a.gl1;return"string"==typeof n?t.getExtension(n):n}(t,r,o)},a.getSamplesForFormat=function(t,e){var r=e.format;return t.getInternalformatParameter(n.a.RENDERBUFFER,r,n.a.SAMPLES)};var i=a.prototype;return i.initialize=function(t){var e=t.format,r=t.width,a=void 0===r?1:r,i=t.height,s=void 0===i?1:i,f=t.samples,h=void 0===f?0:f;return Object(c.a)(e,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(n.a.RENDERBUFFER,this.handle),0!==h&&Object(u.e)(this.gl)?this.gl.renderbufferStorageMultisample(n.a.RENDERBUFFER,h,e,a,s):this.gl.renderbufferStorage(n.a.RENDERBUFFER,e,a,s),this.format=e,this.width=a,this.height=s,this.samples=h,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*o[this.format].bpp),this},i.resize=function(t){var e=t.width,r=t.height;return e!==this.width||r!==this.height?this.initialize({width:e,height:r,format:this.format,samples:this.samples}):this},i._createHandle=function(){return this.gl.createRenderbuffer()},i._deleteHandle=function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()},i._bindHandle=function(t){this.gl.bindRenderbuffer(n.a.RENDERBUFFER,t)},i._syncHandle=function(t){this.format=this.getParameter(n.a.RENDERBUFFER_INTERNAL_FORMAT),this.width=this.getParameter(n.a.RENDERBUFFER_WIDTH),this.height=this.getParameter(n.a.RENDERBUFFER_HEIGHT),this.samples=this.getParameter(n.a.RENDERBUFFER_SAMPLES)},i._getParameter=function(t){return this.gl.bindRenderbuffer(n.a.RENDERBUFFER,this.handle),this.gl.getRenderbufferParameter(n.a.RENDERBUFFER,t)},a}(i.a)},SIeT:function(t,e,r){r("Sc3u")("Uint32",4,(function(t){return function(e,r,a){return t(this,e,r,a)}}))},UBYz:function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"d",(function(){return o}));r("Kb1d"),r("6nXr"),r("AItV"),r("88iX"),r("HOSt"),r("CtJk"),r("SIeT"),r("h3Sa"),r("5irr");var a=r("73Rc");function n(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return a.a.FLOAT;case Uint16Array:return a.a.UNSIGNED_SHORT;case Uint32Array:return a.a.UNSIGNED_INT;case Uint8Array:case Uint8ClampedArray:return a.a.UNSIGNED_BYTE;case Int8Array:return a.a.BYTE;case Int16Array:return a.a.SHORT;case Int32Array:return a.a.INT;default:throw new Error("Failed to deduce GL constant from typed array")}}function i(t,e){var r=(void 0===e?{}:e).clamped,n=void 0===r||r;switch(t){case a.a.FLOAT:return Float32Array;case a.a.UNSIGNED_SHORT:case a.a.UNSIGNED_SHORT_5_6_5:case a.a.UNSIGNED_SHORT_4_4_4_4:case a.a.UNSIGNED_SHORT_5_5_5_1:return Uint16Array;case a.a.UNSIGNED_INT:return Uint32Array;case a.a.UNSIGNED_BYTE:return n?Uint8ClampedArray:Uint8Array;case a.a.BYTE:return Int8Array;case a.a.SHORT:return Int16Array;case a.a.INT:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function s(t){var e=t.data,r=t.width,a=t.height,n=t.bytesPerPixel,i=void 0===n?4:n,s=t.temp,o=r*i;s=s||new Uint8Array(o);for(var u=0;u<a/2;++u){var c=u*o,f=(a-u-1)*o;s.set(e.subarray(c,c+o)),e.copyWithin(c,f,f+o),e.set(s,f)}}function o(t){for(var e=t.data,r=t.width,a=t.height,n=Math.round(r/2),i=Math.round(a/2),s=new Uint8Array(n*i*4),o=0;o<i;o++)for(var u=0;u<n;u++)for(var c=0;c<4;c++)s[4*(o*n+u)+c]=e[4*(2*o*r+2*u)+c];return{data:s,width:n,height:i}}},WFpA:function(t,e,r){"use strict";r.d(e,"a",(function(){return Y}));r("sC2a"),r("E5k/"),r("ofTv"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("8npG"),r("rzGZ"),r("m210"),r("4DPX");var a,n=r("73Rc"),i=r("98Cc"),s=r("rfXe"),o=r("mECX"),u=(r("Ll4R"),r("SIeT"),r("6nXr"),r("5irr"),r("YBKJ"),r("9ZhD"),r("lHlH")),c=r("KcFQ"),f=r("Iq2B"),h=((a={})[n.a.FLOAT]=F.bind(null,"uniform1fv",_,1,O),a[n.a.FLOAT_VEC2]=F.bind(null,"uniform2fv",_,2,O),a[n.a.FLOAT_VEC3]=F.bind(null,"uniform3fv",_,3,O),a[n.a.FLOAT_VEC4]=F.bind(null,"uniform4fv",_,4,O),a[n.a.INT]=F.bind(null,"uniform1iv",v,1,O),a[n.a.INT_VEC2]=F.bind(null,"uniform2iv",v,2,O),a[n.a.INT_VEC3]=F.bind(null,"uniform3iv",v,3,O),a[n.a.INT_VEC4]=F.bind(null,"uniform4iv",v,4,O),a[n.a.BOOL]=F.bind(null,"uniform1iv",v,1,O),a[n.a.BOOL_VEC2]=F.bind(null,"uniform2iv",v,2,O),a[n.a.BOOL_VEC3]=F.bind(null,"uniform3iv",v,3,O),a[n.a.BOOL_VEC4]=F.bind(null,"uniform4iv",v,4,O),a[n.a.FLOAT_MAT2]=F.bind(null,"uniformMatrix2fv",_,4,I),a[n.a.FLOAT_MAT3]=F.bind(null,"uniformMatrix3fv",_,9,I),a[n.a.FLOAT_MAT4]=F.bind(null,"uniformMatrix4fv",_,16,I),a[n.a.SAMPLER_2D]=y,a[n.a.SAMPLER_CUBE]=y,a[n.a.UNSIGNED_INT]=F.bind(null,"uniform1uiv",m,1,O),a[n.a.UNSIGNED_INT_VEC2]=F.bind(null,"uniform2uiv",m,2,O),a[n.a.UNSIGNED_INT_VEC3]=F.bind(null,"uniform3uiv",m,3,O),a[n.a.UNSIGNED_INT_VEC4]=F.bind(null,"uniform4uiv",m,4,O),a[n.a.FLOAT_MAT2x3]=F.bind(null,"uniformMatrix2x3fv",_,6,I),a[n.a.FLOAT_MAT2x4]=F.bind(null,"uniformMatrix2x4fv",_,8,I),a[n.a.FLOAT_MAT3x2]=F.bind(null,"uniformMatrix3x2fv",_,6,I),a[n.a.FLOAT_MAT3x4]=F.bind(null,"uniformMatrix3x4fv",_,12,I),a[n.a.FLOAT_MAT4x2]=F.bind(null,"uniformMatrix4x2fv",_,8,I),a[n.a.FLOAT_MAT4x3]=F.bind(null,"uniformMatrix4x3fv",_,12,I),a[n.a.SAMPLER_3D]=y,a[n.a.SAMPLER_2D_SHADOW]=y,a[n.a.SAMPLER_2D_ARRAY]=y,a[n.a.SAMPLER_2D_ARRAY_SHADOW]=y,a[n.a.SAMPLER_CUBE_SHADOW]=y,a[n.a.INT_SAMPLER_2D]=y,a[n.a.INT_SAMPLER_3D]=y,a[n.a.INT_SAMPLER_CUBE]=y,a[n.a.INT_SAMPLER_2D_ARRAY]=y,a[n.a.UNSIGNED_INT_SAMPLER_2D]=y,a[n.a.UNSIGNED_INT_SAMPLER_3D]=y,a[n.a.UNSIGNED_INT_SAMPLER_CUBE]=y,a[n.a.UNSIGNED_INT_SAMPLER_2D_ARRAY]=y,a),l={},d={},g={},E=[0];function b(t,e,r,a){1===e&&"boolean"==typeof t&&(t=t?1:0),Number.isFinite(t)&&(E[0]=t,t=E);var n=t.length;if(n%e&&u.f.warn("Uniform size should be multiples of "+e,t)(),t instanceof r)return t;var i=a[n];i||(i=new r(n),a[n]=i);for(var s=0;s<n;s++)i[s]=t[s];return i}function _(t,e){return b(t,e,Float32Array,l)}function v(t,e){return b(t,e,Int32Array,d)}function m(t,e){return b(t,e,Uint32Array,g)}function A(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};var e=t.match(/([^[]*)(\[[0-9]+\])?/);if(!e||e.length<2)throw new Error("Failed to parse GLSL uniform name "+t);return{name:e[1],length:e[2]||1,isArray:Boolean(e[2])}}function T(t,e,r){var a=h[r.type];if(!a)throw new Error("Unknown GLSL uniform type "+r.type);return a().bind(null,t,e)}function p(t){return Array.isArray(t)||ArrayBuffer.isView(t)?function(t){if(0===t.length)return!1;for(var e=Math.min(t.length,16),r=0;r<e;++r)if(!Number.isFinite(t[r]))return!1;return!0}(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof s.a||(t instanceof c.a||t instanceof o.a&&Boolean(t.texture))))}function R(t,e,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(t[e])for(var a=t[e],n=0,i=r.length;n<i;++n)a[n]=r[n];else t[e]=r.slice();else t[e]=r}function y(){var t=null;return function(e,r,a){var n=t!==a;return n&&(e.uniform1i(r,a),t=a),n}}function F(t,e,r,a){var n=null,i=null;return function(s,o,u){var c=e(u,r),h=c.length,l=!1;if(null===n)n=new Float32Array(h),i=h,l=!0;else{Object(f.a)(i===h,"Uniform length cannot change.");for(var d=0;d<h;++d)if(c[d]!==n[d]){l=!0;break}}return l&&(a(s,t,o,c),n.set(c)),l}}function O(t,e,r,a){t[e](r,a)}function I(t,e,r,a){t[e](r,!1,a)}r("TAD1");function B(t,e){void 0===e&&(e="unnamed");var r=t.match(/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/);return r?r[1]:e}r("HQhv");function N(t,e,r,a){for(var n=t.split(/\r?\n/),i={},s={},o=a||B(e)||"(unnamed)",u=function(t){switch(t){case 35632:return"fragment";case 35633:return"vertex";default:return"unknown type"}}(r)+" shader "+o,c=0;c<n.length;c++){var f=n[c];if(!(f.length<=1)){var h=f.split(":"),l=h[0],d=parseInt(h[2],10);if(isNaN(d))throw new Error("GLSL compilation error in "+u+": "+t);"WARNING"!==l?i[d]=f:s[d]=f}}var g=function(t,e,r){void 0===e&&(e=1);void 0===r&&(r=": ");var a=t.split(/\r?\n/),n=String(a.length+e-1).length;return a.map((function(t,a){var i=a+e,s=String(i).length;return U(i,n-s)+r+t}))}(e);return{shaderName:u,errors:L(i,g),warnings:L(s,g)}}function L(t,e){for(var r="",a=0;a<e.length;a++){var n=e[a];if((t[a+3]||t[a+2]||t[a+1])&&(r+=n+"\n",t[a+1])){var i=t[a+1],s=i.split(":",3),o=s[0],u=parseInt(s[1],10)||0;r+=U("^^^ "+o+": "+i.substring(s.join(":").length+1).trim()+"\n\n",u)}}return r}function U(t,e){for(var r="",a=0;a<e;++a)r+=" ";return""+r+t}var S=r("3dIF"),w=r("BunF");function x(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var P=function(t){function e(r,a){var n;Object(S.b)(r),Object(f.a)("string"==typeof a.source,"Shader: GLSL source code must be a JavaScript string");var i=B(a.source,null)||a.id||Object(w.c)("unnamed "+e.getTypeName(a.shaderType));return(n=t.call(this,r,{id:i})||this).shaderType=a.shaderType,n.source=a.source,n.initialize(a),n}x(e,t),e.getTypeName=function(t){switch(t){case n.a.VERTEX_SHADER:return"vertex-shader";case n.a.FRAGMENT_SHADER:return"fragment-shader";default:return Object(f.a)(!1),"unknown"}};var r=e.prototype;return r.initialize=function(t){var e=t.source,r=B(e,null);r&&(this.id=Object(w.c)(r)),this._compile(e)},r.getParameter=function(t){return this.gl.getShaderParameter(this.handle,t)},r.toString=function(){return e.getTypeName(this.shaderType)+":"+this.id},r.getName=function(){return B(this.source)||"unnamed-shader"},r.getSource=function(){return this.gl.getShaderSource(this.handle)},r.getTranslatedSource=function(){var t=this.gl.getExtension("WEBGL.debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"},r._compile=function(t){if(void 0===t&&(t=this.source),t.startsWith("#version ")||(t="#version 100\n"+t),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(n.a.COMPILE_STATUS)){var e=N(this.gl.getShaderInfoLog(this.handle),this.source,this.shaderType,this.id),r=e.shaderName,a=e.errors,i=e.warnings;throw u.f.error("GLSL compilation errors in "+r+"\n"+a)(),u.f.warn("GLSL compilation warnings in "+r+"\n"+i)(),new Error("GLSL compilation errors in "+r)}},r._deleteHandle=function(){this.gl.deleteShader(this.handle)},r._getOptsFromHandle=function(){return{type:this.getParameter(n.a.SHADER_TYPE),source:this.getSource()}},e}(i.a),D=function(t){function e(e,r){return"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:n.a.VERTEX_SHADER}))||this}return x(e,t),e.prototype._createHandle=function(){return this.gl.createShader(n.a.VERTEX_SHADER)},e}(P),M=function(t){function e(e,r){return"string"==typeof r&&(r={source:r}),t.call(this,e,Object.assign({},r,{shaderType:n.a.FRAGMENT_SHADER}))||this}return x(e,t),e.prototype._createHandle=function(){return this.gl.createShader(n.a.FRAGMENT_SHADER)},e}(P),C=(r("zGcK"),r("YJ55")),j=r("Ifu7"),H=function(){function t(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}var e=t.prototype;return e.getAttributeInfo=function(t){var e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null},e.getAttributeLocation=function(t){var e=this.getAttributeInfo(t);return e?e.location:-1},e.getAttributeAccessor=function(t){var e=this.getAttributeInfo(t);return e?e.accessor:null},e.getVaryingInfo=function(t){var e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null},e.getVaryingIndex=function(t){var e=this.getVaryingInfo();return e?e.location:-1},e.getVaryingAccessor=function(t){var e=this.getVaryingInfo();return e?e.accessor:null},e._readAttributesFromProgram=function(t){for(var e=t.gl,r=e.getProgramParameter(t.handle,e.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var n=e.getActiveAttrib(t.handle,a),i=n.name,s=n.type,o=n.size,u=e.getAttribLocation(t.handle,i);u>=0&&this._addAttribute(u,i,s,o)}this.attributeInfos.sort((function(t,e){return t.location-e.location}))},e._readVaryingsFromProgram=function(t){var e=t.gl;if(Object(u.e)(e)){for(var r=e.getProgramParameter(t.handle,e.TRANSFORM_FEEDBACK_VARYINGS),a=0;a<r;a++){var n=e.getTransformFeedbackVarying(t.handle,a),i=n.name,s=n.type,o=n.size;this._addVarying(a,i,s,o)}this.varyingInfos.sort((function(t,e){return t.location-e.location}))}},e._addAttribute=function(t,e,r,a){var n=Object(j.a)(r),i={type:n.type,size:a*n.components};this._inferProperties(t,e,i);var s={location:t,name:e,accessor:new C.a(i)};this.attributeInfos.push(s),this.attributeInfosByLocation[t]=s,this.attributeInfosByName[s.name]=s},e._inferProperties=function(t,e,r){/instance/i.test(e)&&(r.divisor=1)},e._addVarying=function(t,e,r,a){var n=Object(j.a)(r),i=n.type,s=n.components,o={location:t,name:e,accessor:new C.a({type:i,size:a*s})};this.varyingInfos.push(o),this.varyingInfosByName[o.name]=o},t}(),G=r("62vL");function X(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}var V=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],Y=function(t){var e,r;function a(e,r){var a;return void 0===r&&(r={}),(a=t.call(this,e,r)||this).stubRemovedMethods("Program","v6.0",V),a._isCached=!1,a.initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a._setId(r.id),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var i=a.prototype;return i.initialize=function(t){void 0===t&&(t={});var e=t,r=e.hash,a=e.vs,n=e.fs,i=e.varyings,s=e.bufferMode,o=void 0===s?35981:s;return this.hash=r||"",this.vs="string"==typeof a?new D(this.gl,{id:t.id+"-vs",source:a}):a,this.fs="string"==typeof n?new M(this.gl,{id:t.id+"-fs",source:n}):n,Object(f.a)(this.vs instanceof D),Object(f.a)(this.fs instanceof M),this.uniforms={},this._textureUniforms={},this._texturesRenderable=!0,i&&i.length>0&&(Object(S.a)(this.gl),this.varyings=i,this.gl.transformFeedbackVaryings(this.handle,i,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new H(this),this.setProps(t)},i.delete=function(e){return void 0===e&&(e={}),this._isCached?this:t.prototype.delete.call(this,e)},i.setProps=function(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this},i.draw=function(t){var e=this,r=t.logPriority,a=t.drawMode,i=void 0===a?n.a.TRIANGLES:a,s=t.vertexCount,o=t.offset,c=void 0===o?0:o,h=t.start,l=t.end,d=t.isIndexed,g=void 0!==d&&d,E=t.indexType,b=void 0===E?n.a.UNSIGNED_SHORT:E,_=t.instanceCount,v=void 0===_?0:_,m=t.isInstanced,A=void 0===m?v>0:m,T=t.vertexArray,p=void 0===T?null:T,R=t.transformFeedback,y=t.framebuffer,F=t.parameters,O=void 0===F?{}:F,I=t.uniforms,B=t.samplers;if((I||B)&&(u.f.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(I||{})),u.f.priority>=r){var N=y?y.id:"default",L="mode="+Object(G.a)(this.gl,i)+" verts="+s+" instances="+v+" indexType="+Object(G.a)(this.gl,b)+" isInstanced="+A+" isIndexed="+g+" Framebuffer="+N;u.f.log(r,L)()}return Object(f.a)(p),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===s||A&&0===v)&&(p.bindForDraw(s,v,(function(){if(void 0!==y&&(O=Object.assign({},O,{framebuffer:y})),R){var t=Object(j.c)(i);R.begin(t)}e._bindTextures(),Object(u.k)(e.gl,O,(function(){g&&A?e.gl.drawElementsInstanced(i,s,b,c,v):g&&Object(u.e)(e.gl)&&!isNaN(h)&&!isNaN(l)?e.gl.drawRangeElements(i,h,l,s,b,c):g?e.gl.drawElements(i,s,b,c):A?e.gl.drawArraysInstanced(i,c,s,v):e.gl.drawArrays(i,c,s)})),R&&R.end()})),!0)},i.setUniforms=function(t){for(var e in void 0===t&&(t={}),u.f.priority>=2&&function(t,e,r){for(var a in t){var n=t[a];if((!r||Boolean(r[a]))&&!p(n))throw e=e?e+" ":"",console.error(e+" Bad uniform "+a,n),new Error(e+" Bad uniform "+a)}}(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle),t){var r=t[e],a=this._uniformSetters[e];if(a){var n=r,i=!1;if(n instanceof o.a&&(n=n.texture),n instanceof s.a)if(i=this.uniforms[e]!==r){void 0===a.textureIndex&&(a.textureIndex=this._textureIndexCounter++);var c=n,f=a.textureIndex;c.bind(f),n=f,c.loaded||(this._texturesRenderable=!1),this._textureUniforms[e]=c}else n=a.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(a(n)||i)&&R(this.uniforms,e,r)}}return this},i._areTexturesRenderable=function(){if(this._texturesRenderable)return!0;for(var t in this._texturesRenderable=!0,this._textureUniforms){var e=this._textureUniforms[t];this._texturesRenderable=this._texturesRenderable&&e.loaded}return this._texturesRenderable},i._bindTextures=function(){for(var t in this._textureUniforms){var e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}},i._createHandle=function(){return this.gl.createProgram()},i._deleteHandle=function(){this.gl.deleteProgram(this.handle)},i._getOptionsFromHandle=function(t){for(var e,r={},a=X(this.gl.getAttachedShaders(t));!(e=a()).done;){var i=e.value;switch(this.gl.getShaderParameter(this.handle,n.a.SHADER_TYPE)){case n.a.VERTEX_SHADER:r.vs=new D({handle:i});break;case n.a.FRAGMENT_SHADER:r.fs=new M({handle:i})}}return r},i._getParameter=function(t){return this.gl.getProgramParameter(this.handle,t)},i._setId=function(t){if(!t){var e=this._getName();this.id=Object(w.c)(e)}},i._getName=function(){var t=this.vs.getName()||this.fs.getName();return t=(t=t.replace(/shader/i,""))?t+"-program":"program"},i._compileAndLink=function(){var t=this.gl;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),u.f.time(4,"linkProgram for "+this._getName())(),t.linkProgram(this.handle),u.f.timeEnd(4,"linkProgram for "+this._getName())(),t.debug||u.f.level>0){if(!t.getProgramParameter(this.handle,t.LINK_STATUS))throw new Error("Error linking: "+t.getProgramInfoLog(this.handle));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,t.VALIDATE_STATUS))throw new Error("Error validating: "+t.getProgramInfoLog(this.handle))}},i._readUniformLocationsFromLinkedProgram=function(){var t=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(n.a.ACTIVE_UNIFORMS);for(var e=0;e<this._uniformCount;e++){var r=this.gl.getActiveUniform(this.handle,e),a=A(r.name),i=a.name,s=(a.isArray,t.getUniformLocation(this.handle,i));if(this._uniformSetters[i]=T(t,s,r),r.size>1)for(var o=0;o<r.size;o++)s=t.getUniformLocation(this.handle,i+"["+o+"]"),this._uniformSetters[i+"["+o+"]"]=T(t,s,r)}this._textureIndexCounter=0},i.getActiveUniforms=function(t,e){return this.gl.getActiveUniforms(this.handle,t,e)},i.getUniformBlockIndex=function(t){return this.gl.getUniformBlockIndex(this.handle,t)},i.getActiveUniformBlockParameter=function(t,e){return this.gl.getActiveUniformBlockParameter(this.handle,t,e)},i.uniformBlockBinding=function(t,e){this.gl.uniformBlockBinding(this.handle,t,e)},a}(i.a)},WY7U:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));r("rzGZ"),r("Dq+y"),r("YbXK"),r("ofTv"),r("E5k/"),r("6kNP"),r("8npG");var a=r("o0o1"),n=r.n(a),i=(r("wcNg"),r("73Rc")),s=r("lHlH"),o=r("rfXe"),u=r("3dIF");function c(t,e,r,a,n,i,s){try{var o=t[i](s),u=o.value}catch(c){return void r(c)}o.done?e(u):Promise.resolve(u).then(a,n)}var f=[i.a.TEXTURE_CUBE_MAP_POSITIVE_X,i.a.TEXTURE_CUBE_MAP_NEGATIVE_X,i.a.TEXTURE_CUBE_MAP_POSITIVE_Y,i.a.TEXTURE_CUBE_MAP_NEGATIVE_Y,i.a.TEXTURE_CUBE_MAP_POSITIVE_Z,i.a.TEXTURE_CUBE_MAP_NEGATIVE_Z],h=function(t){var e,r;function a(e,r){var a;return void 0===r&&(r={}),Object(u.b)(e),(a=t.call(this,e,Object.assign({},r,{target:i.a.TEXTURE_CUBE_MAP}))||this).initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}r=t,(e=a).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var o=a.prototype;return o.initialize=function(t){var e=this;void 0===t&&(t={});var r=t,a=r.mipmaps,n=void 0===a||a,i=r.parameters,s=void 0===i?{}:i;this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,n&&e.generateMipmap(t),e.setParameters(s)}))},o.subImage=function(t){var e=t.face,r=t.data,a=t.x,n=void 0===a?0:a,i=t.y,s=void 0===i?0:i,o=t.mipmapLevel,u=void 0===o?0:o;return this._subImage({target:e,data:r,x:n,y:s,mipmapLevel:u})},o.setCubeMapImageData=function(){var t,e=(t=n.a.mark((function t(e){var r,a,o,u,c,h,l,d,g,E,b,_,v,m=this;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.width,a=e.height,o=e.pixels,u=e.data,c=e.border,h=void 0===c?0:c,l=e.format,d=void 0===l?i.a.RGBA:l,g=e.type,E=void 0===g?i.a.UNSIGNED_BYTE:g,b=this.gl,_=o||u,t.next=5,Promise.all(f.map((function(t){var e=_[t];return Promise.all(Array.isArray(e)?e:[e])})));case 5:v=t.sent,this.bind(),f.forEach((function(t,e){v[e].length>1&&!1!==m.opts.mipmaps&&s.f.warn(m.id+" has mipmap and multiple LODs.")(),v[e].forEach((function(e,n){r&&a?b.texImage2D(t,n,d,r,a,h,d,E,e):b.texImage2D(t,n,d,d,E,e)}))})),this.unbind();case 9:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(a,n){var i=t.apply(e,r);function s(t){c(i,a,n,s,o,"next",t)}function o(t){c(i,a,n,s,o,"throw",t)}s(void 0)}))});return function(t){return e.apply(this,arguments)}}(),o.setImageDataForFace=function(t){var e=this,r=t.face,a=t.width,n=t.height,s=t.pixels,o=t.data,u=t.border,c=void 0===u?0:u,f=t.format,h=void 0===f?i.a.RGBA:f,l=t.type,d=void 0===l?i.a.UNSIGNED_BYTE:l,g=this.gl,E=s||o;return this.bind(),E instanceof Promise?E.then((function(a){return e.setImageDataForFace(Object.assign({},t,{face:r,data:a,pixels:a}))})):this.width||this.height?g.texImage2D(r,0,h,a,n,c,h,d,E):g.texImage2D(r,0,h,h,d,E),this},a}(o.a);h.FACES=f},WrWi:function(t,e,r){"use strict";r.d(e,"a",(function(){return m}));r("YBKJ"),r("9ZhD"),r("pJf4"),r("E5k/"),r("n0hJ"),r("ofTv"),r("rzGZ"),r("Dq+y"),r("8npG");var a=r("73Rc"),n=r("lHlH"),i=r("YJ55"),s=r("3LCa"),o=(r("SIeT"),r("6nXr"),r("5irr"),r("98Cc")),u=(r("Kb1d"),null);function c(t,e){var r;return new t((r=t.BYTES_PER_ELEMENT*e,(!u||u.byteLength<r)&&(u=new ArrayBuffer(r)),u),0,e)}var f=r("Iq2B"),h=(r("sc67"),r("W7fB")),l=r("o7VR"),d=r("KFwR");function g(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var E=function(t){var e,r;function i(e,r){var a;void 0===r&&(r={});var n=r.id||r.program&&r.program.id;return(a=t.call(this,e,Object.assign({},r,{id:n}))||this).buffer=null,a.bufferValue=null,a.isDefaultArray=r.isDefaultArray||!1,a.initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(a)),a}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.isSupported=function(t,e){return void 0===e&&(e={}),!e.constantAttributeZero||(Object(n.e)(t)||"Chrome"===function(t){if(!t&&!Object(l.a)())return"Node";if(Object(d.a)(t))return"Electron";var e="undefined"!=typeof navigator?navigator:{},r=t||e.userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";var a=-1!==r.indexOf("MSIE "),n=-1!==r.indexOf("Trident/");return a||n?"IE":h.b.chrome?"Chrome":h.b.safari?"Safari":h.b.mozInnerScreenX?"Firefox":"Unknown"}())},i.getDefaultArray=function(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new i(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray},i.getMaxAttributes=function(t){return i.MAX_ATTRIBUTES=i.MAX_ATTRIBUTES||t.getParameter(t.MAX_VERTEX_ATTRIBS),i.MAX_ATTRIBUTES},i.setConstant=function(t,e,r){switch(r.constructor){case Float32Array:i._setConstantFloatArray(t,e,r);break;case Int32Array:i._setConstantIntArray(t,e,r);break;case Uint32Array:i._setConstantUintArray(t,e,r);break;default:Object(f.a)(!1)}};var o,u,E,b=i.prototype;return b.delete=function(){t.prototype.delete.call(this),this.buffer&&this.buffer.delete()},b.initialize=function(t){return void 0===t&&(t={}),this.setProps(t)},b.setProps=function(t){return this},b.setElementBuffer=function(t,e){var r=this;return void 0===t&&(t=null),void 0===e&&(e={}),Object(f.a)(!t||t.target===a.a.ELEMENT_ARRAY_BUFFER,"elements must be GL.ELEMENT_ARRAY_BUFFER"),this.bind((function(){r.gl.bindBuffer(a.a.ELEMENT_ARRAY_BUFFER,t?t.handle:null)})),this},b.setBuffer=function(t,e,r){if(e.target===a.a.ELEMENT_ARRAY_BUFFER)return this.setElementBuffer(e,r);var i=r.size,s=r.type,o=r.stride,u=r.offset,c=r.normalized,h=r.integer,l=r.divisor,d=this.gl;return t=Number(t),this.bind((function(){d.bindBuffer(d.ARRAY_BUFFER,e.handle),h?(Object(f.a)(Object(n.e)(d)),d.vertexAttribIPointer(t,i,s,o,u)):d.vertexAttribPointer(t,i,s,c,o,u),d.enableVertexAttribArray(t),d.vertexAttribDivisor(t,l||0)})),this},b.enable=function(t,e){var r=this;return void 0===e&&(e=!0),!e&&0===t&&!i.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind((function(){return e?r.gl.enableVertexAttribArray(t):r.gl.disableVertexAttribArray(t)}))),this},b.getConstantBuffer=function(t,e,r){var a=this._normalizeConstantArrayValue(e,r),n=a.byteLength*t,i=a.length*t,o=!this.buffer;if(this.buffer=this.buffer||new s.a(this.gl,n),o=(o=o||this.buffer.reallocate(n))||!this._compareConstantArrayValues(a,this.bufferValue)){var u=c(e.constructor,i);!function(t){for(var e=t.target,r=t.source,a=t.start,n=void 0===a?0:a,i=t.count,s=void 0===i?1:i,o=r.length,u=s*o,c=0,f=n;c<o;c++)e[f++]=r[c];for(;c<u;)c<u-c?(e.copyWithin(n+c,n,n+c),c*=2):(e.copyWithin(n+c,n,n+u-c),c=u)}({target:u,source:a,start:0,count:i}),this.buffer.subData(u),this.bufferValue=e}return this.buffer},b._normalizeConstantArrayValue=function(t,e){return Array.isArray(t)?new Float32Array(t):t},b._compareConstantArrayValues=function(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0},i._setConstantFloatArray=function(t,e,r){switch(r.length){case 1:t.vertexAttrib1fv(e,r);break;case 2:t.vertexAttrib2fv(e,r);break;case 3:t.vertexAttrib3fv(e,r);break;case 4:t.vertexAttrib4fv(e,r);break;default:Object(f.a)(!1)}},i._setConstantIntArray=function(t,e,r){switch(Object(f.a)(Object(n.e)(t)),r.length){case 1:t.vertexAttribI1iv(e,r);break;case 2:t.vertexAttribI2iv(e,r);break;case 3:t.vertexAttribI3iv(e,r);break;case 4:t.vertexAttribI4iv(e,r);break;default:Object(f.a)(!1)}},i._setConstantUintArray=function(t,e,r){switch(Object(f.a)(Object(n.e)(t)),r.length){case 1:t.vertexAttribI1uiv(e,r);break;case 2:t.vertexAttribI2uiv(e,r);break;case 3:t.vertexAttribI3uiv(e,r);break;case 4:t.vertexAttribI4uiv(e,r);break;default:Object(f.a)(!1)}},b._createHandle=function(){return this.gl.createVertexArray()},b._deleteHandle=function(t){return this.gl.deleteVertexArray(t),[this.elements]},b._bindHandle=function(t){this.gl.bindVertexArray(t)},b._getParameter=function(t,e){var r=this,n=e.location;return Object(f.a)(Number.isFinite(n)),this.bind((function(){switch(t){case a.a.VERTEX_ATTRIB_ARRAY_POINTER:return r.gl.getVertexAttribOffset(n,t);default:return r.gl.getVertexAttrib(n,t)}}))},o=i,(u=[{key:"MAX_ATTRIBUTES",get:function(){return i.getMaxAttributes(this.gl)}}])&&g(o.prototype,u),E&&g(o,E),i}(o.a),b=r("7rsd"),_=/^(.+)__LOCATION_([0-9]+)$/,v=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],m=function(){function t(t,e){void 0===e&&(e={});var r=e.id||e.program&&e.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new E(t),Object(b.a)(this,"VertexArray","v6.0",v),this.initialize(e),Object.seal(this)}var e=t.prototype;return e.delete=function(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()},e.initialize=function(t){return void 0===t&&(t={}),this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)},e.reset=function(){this.elements=null,this.elementsAccessor=null;var t=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this},e.setProps=function(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this},e.clearDrawParams=function(){this.drawParams=null},e.getDrawParams=function(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams},e.setAttributes=function(t){var e=this;return Object.assign(this.attributes,t),this.vertexArrayObject.bind((function(){for(var r in t){var n=t[r];e._setAttribute(r,n)}e.gl.bindBuffer(a.a.ARRAY_BUFFER,null)})),this},e.setElementBuffer=function(t,e){return void 0===t&&(t=null),void 0===e&&(e={}),this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this},e.setBuffer=function(t,e,r){if(void 0===r&&(r={}),e.target===a.a.ELEMENT_ARRAY_BUFFER)return this.setElementBuffer(e,r);var n=this._resolveLocationAndAccessor(t,e,e.accessor,r),i=n.location,s=n.accessor;return i>=0&&(this.values[i]=e,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,e,s)),this},e.setConstant=function(t,e,r){void 0===r&&(r={});var a=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},r)),n=a.location,i=a.accessor;return n>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e,i),this.values[n]=e,this.accessors[n]=i,this.clearDrawParams(),this.vertexArrayObject.enable(n,!1)),this},e.unbindBuffers=function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.vertexArrayObject.setElementBuffer(null),t.buffer=t.buffer||new s.a(t.gl,{accessor:{size:4}});for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++)t.values[e]instanceof s.a&&(t.gl.disableVertexAttribArray(e),t.gl.bindBuffer(a.a.ARRAY_BUFFER,t.buffer.handle),t.gl.vertexAttribPointer(e,1,a.a.FLOAT,!1,0,0))})),this},e.bindBuffers=function(){var t=this;return this.vertexArrayObject.bind((function(){t.elements&&t.setElementBuffer(t.elements);for(var e=0;e<t.vertexArrayObject.MAX_ATTRIBUTES;e++){var r=t.values[e];r instanceof s.a&&t.setBuffer(e,r)}})),this},e.bindForDraw=function(t,e,r){var a,n=this;return this.vertexArrayObject.bind((function(){n._setConstantAttributes(t,e),a=r()})),a},e._resolveLocationAndAccessor=function(t,e,r,a){var s=this,o=this._getAttributeIndex(t),u=o.location,c=o.name;if(!Number.isFinite(u)||u<0)return this.unused[t]=e,n.f.once(3,(function(){return"unused value "+t+" in "+s.id}))(),this;var h=this._getAttributeInfo(c||u);if(!h)return{location:-1,accessor:null};var l=this.accessors[u]||{},d=i.a.resolve(h.accessor,l,r,a),g=d.size,E=d.type;return Object(f.a)(Number.isFinite(g)&&Number.isFinite(E)),{location:u,accessor:d}},e._getAttributeInfo=function(t){return this.configuration&&this.configuration.getAttributeInfo(t)},e._getAttributeIndex=function(t){var e=Number(t);if(Number.isFinite(e))return{location:e};var r=_.exec(t),a=r?r[1]:t,n=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(a)+n,name:a}:{location:-1}},e._setAttribute=function(t,e){if(e instanceof s.a)this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof s.a){var r=e[0],a=e[1];this.setBuffer(t,r,a)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){var n=e;this.setConstant(t,n)}else{if(!(e.buffer instanceof s.a))throw new Error("VertexArray: attributes must be Buffers or constants (i.e. typed array)");var i=e;this.setBuffer(t,i.buffer,i)}},e._setConstantAttributes=function(t,e){var r=Math.max(0|t,0|e),a=this.values[0];ArrayBuffer.isView(a)&&this._setConstantAttributeZero(a,r);for(var n=1;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)a=this.values[n],ArrayBuffer.isView(a)&&this._setConstantAttribute(n,a)},e._setConstantAttributeZero=function(t,e){if(E.isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,t);else{var r=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}},e._setConstantAttribute=function(t,e){E.setConstant(this.gl,t,e)},e._updateDrawParams=function(){for(var t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t},e._updateDrawParamsForLocation=function(t,e){var r=this.values[e],a=this.accessors[e];if(r){var n=a.divisor>0;if(t.isInstanced=t.isInstanced||n,r instanceof s.a){var i=r;if(n){var o=i.getVertexCount(a);t.instanceCount=Math.min(t.instanceCount,o)}else{var u=i.getVertexCount(a);t.vertexCount=Math.min(t.vertexCount,u)}}}},e.setElements=function(t,e){return void 0===t&&(t=null),void 0===e&&(e={}),n.f.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)},t}()},YJ55:function(t,e,r){"use strict";r.d(e,"a",(function(){return d}));r("DrhF"),r("q8oJ"),r("8npG"),r("nWfQ");var a=r("73Rc"),n=r("UBYz"),i=r("Iq2B"),s=r("/wHA");function o(t,e,r){return(o=u()?Reflect.construct:function(t,e,r){var a=[null];a.push.apply(a,e);var n=new(Function.bind.apply(t,a));return r&&c(n,r.prototype),n}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var h={offset:0,stride:0,type:a.a.FLOAT,size:1,divisor:0,normalized:!1,integer:!1},l={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},d=function(){function t(){for(var t=this,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}t.getBytesPerElement=function(t){return Object(n.c)(t.type||a.a.FLOAT).BYTES_PER_ELEMENT},t.getBytesPerVertex=function(t){return Object(i.a)(t.size),Object(n.c)(t.type||a.a.FLOAT).BYTES_PER_ELEMENT*t.size},t.resolve=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return o(t,[h].concat(r))};var e,r,u,c=t.prototype;return c.toString=function(){return JSON.stringify(this)},c._assign=function(t){return void 0===t&&(t={}),void 0!==(t=Object(s.a)("Accessor",t,l)).type&&(this.type=t.type,t.type!==a.a.INT&&t.type!==a.a.UNSIGNED_INT||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"==typeof index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this},e=t,(r=[{key:"BYTES_PER_ELEMENT",get:function(){return t.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return t.getBytesPerVertex(this)}}])&&f(e.prototype,r),u&&f(e,u),t}()},dTJe:function(t,e,r){"use strict";r.d(e,"b",(function(){return u})),r.d(e,"c",(function(){return c})),r.d(e,"a",(function(){return f}));r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("8npG"),r("rzGZ"),r("m210"),r("4DPX");var a=r("2aL3"),n=r("lHlH"),i=r("Iq2B");function s(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function u(t,e){return c(t,e)}function c(t,e){return(e=Array.isArray(e)?e:[e]).every((function(e){return h(t,e)}))}function f(t){for(var e in t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},a.b)void 0===t.luma.caps[e]&&(t.luma.caps[e]=h(t,e));return t.luma.caps}function h(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=function(t,e){var r,o=a.b[e];Object(i.a)(o,e);var u=Object(n.e)(t)&&o[1]||o[0];if("function"==typeof u)r=u(t);else if(Array.isArray(u)){r=!0;for(var c,f=s(u);!(c=f()).done;){var h=c.value;r=r&&Boolean(t.getExtension(h))}}else"string"==typeof u?r=Boolean(t.getExtension(u)):"boolean"==typeof u?r=u:Object(i.a)(!1);return r}(t,e)),t.luma.caps[e]||n.f.log(2,"Feature: "+e+" not supported")(),t.luma.caps[e]}},h3Sa:function(t,e,r){r("Sc3u")("Uint16",2,(function(t){return function(e,r,a){return t(this,e,r,a)}}))},kgJN:function(t,e,r){"use strict";r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return f}));r("E5k/");var a=r("2urO"),n=r("WY7U"),i=r("viZF"),s=r("mECX"),o=r("73Rc"),u=r("Iq2B");function c(t,e){Object(u.a)(t instanceof a.a||t instanceof n.a||t instanceof i.a);var r=t.constructor,s=t.gl,o=t.width,c=t.height,f=t.format,h=t.type,l=t.dataFormat,d=t.border,g=t.mipmaps;return new r(s,Object.assign({width:o,height:c,format:f,type:h,dataFormat:l,border:d,mipmaps:g},e))}function f(t,e){var r,a=t.gl,n=t.width,i=t.height,u=t.id;return new s.a(a,Object.assign({},e,{id:"framebuffer-for-"+u,width:n,height:i,attachments:(r={},r[o.a.COLOR_ATTACHMENT0]=t,r)}))}},m5Zt:function(t,e,r){var a=r("P8UN");a(a.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},mECX:function(t,e,r){"use strict";r.d(e,"a",(function(){return v}));r("YBKJ"),r("E5k/"),r("Dq+y"),r("Ggvi"),r("ofTv"),r("YbXK"),r("cFtU"),r("pJf4"),r("q8oJ"),r("8npG"),r("rzGZ"),r("m210"),r("4DPX");var a=r("73Rc"),n=r("lHlH"),i=r("98Cc"),s=r("2urO"),o=r("KcFQ"),u=r("IObG"),c=r("EpVc"),f=r("dTJe"),h=r("3dIF"),l=r("62vL"),d=r("Iq2B");function g(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var a=0;return function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}function b(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _(t,e,r){return e&&b(t.prototype,e),r&&b(t,r),t}var v=function(t){var e,r;function i(e,r){var n;return void 0===r&&(r={}),(n=t.call(this,e,r)||this).width=null,n.height=null,n.attachments={},n.readBuffer=a.a.COLOR_ATTACHMENT0,n.drawBuffers=[a.a.COLOR_ATTACHMENT0],n.ownResources=[],n.initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,i.isSupported=function(t,e){var r=void 0===e?{}:e,a=r.colorBufferFloat,n=r.colorBufferHalfFloat,i=!0;return a&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),n&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i},i.getDefaultFramebuffer=function(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new i(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer},_(i,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}]);var E=i.prototype;return E.initialize=function(t){var e=t.width,r=void 0===e?1:e,a=t.height,n=void 0===a?1:a,i=t.attachments,s=void 0===i?null:i,o=t.color,u=void 0===o||o,c=t.depth,f=void 0===c||c,h=t.stencil,l=void 0!==h&&h,g=t.check,E=void 0===g||g,b=t.readBuffer,_=t.drawBuffers;if(Object(d.a)(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,s)for(var v in s){var m=s[v];(Array.isArray(m)?m[0]:m).resize({width:r,height:n})}else s=this._createDefaultAttachments(u,f,l,r,n);this.update({clearAttachments:!0,attachments:s,readBuffer:b,drawBuffers:_}),s&&E&&this.checkStatus()},E.delete=function(){for(var e,r=g(this.ownResources);!(e=r()).done;){e.value.delete()}t.prototype.delete.call(this)},E.update=function(t){var e=t.attachments,r=void 0===e?{}:e,n=t.readBuffer,i=t.drawBuffers,s=t.clearAttachments,o=void 0!==s&&s,u=t.resizeAttachments,c=void 0===u||u;this.attach(r,{clearAttachments:o,resizeAttachments:c});var f=this.gl,h=f.bindFramebuffer(a.a.FRAMEBUFFER,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),f.bindFramebuffer(a.a.FRAMEBUFFER,h||null),this},E.resize=function(t){var e=void 0===t?{}:t,r=e.width,a=e.height;if(null===this.handle)return Object(d.a)(void 0===r&&void 0===a),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var i in void 0===r&&(r=this.gl.drawingBufferWidth),void 0===a&&(a=this.gl.drawingBufferHeight),r!==this.width&&a!==this.height&&n.f.log(2,"Resizing framebuffer "+this.id+" to "+r+"x"+a)(),this.attachments)this.attachments[i].resize({width:r,height:a});return this.width=r,this.height=a,this},E.attach=function(t,e){var r=this,n=void 0===e?{}:e,i=n.clearAttachments,s=void 0!==i&&i,u=n.resizeAttachments,c=void 0===u||u,f={};s&&Object.keys(this.attachments).forEach((function(t){f[t]=null})),Object.assign(f,t);var h=this.gl.bindFramebuffer(a.a.FRAMEBUFFER,this.handle);for(var l in f){Object(d.a)(void 0!==l,"Misspelled framebuffer binding point?");var g=Number(l),E=f[g],b=E;if(b)if(b instanceof o.a)this._attachRenderbuffer({attachment:g,renderbuffer:b});else if(Array.isArray(E)){var _=E[0],v=E[1],m=void 0===v?0:v,A=E[2],T=void 0===A?0:A;b=_,this._attachTexture({attachment:g,texture:_,layer:m,level:T})}else this._attachTexture({attachment:g,texture:b,layer:0,level:0});else this._unattach(g);c&&b&&b.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(a.a.FRAMEBUFFER,h||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter((function(t){return!r.attachments[t]})).forEach((function(t){delete r.attachments[t]}))},E.checkStatus=function(){var t=this.gl,e=this.getStatus();if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error(m(e));return this},E.getStatus=function(){var t=this.gl,e=t.bindFramebuffer(a.a.FRAMEBUFFER,this.handle),r=t.checkFramebufferStatus(a.a.FRAMEBUFFER);return t.bindFramebuffer(a.a.FRAMEBUFFER,e||null),r},E.clear=function(t){var e=void 0===t?{}:t,r=e.color,n=e.depth,i=e.stencil,s=e.drawBuffers,o=void 0===s?[]:s,c=this.gl.bindFramebuffer(a.a.FRAMEBUFFER,this.handle);return(r||n||i)&&Object(u.a)(this.gl,{color:r,depth:n,stencil:i}),o.forEach((function(t,e){Object(u.b)({drawBuffer:e,value:t})})),this.gl.bindFramebuffer(a.a.FRAMEBUFFER,c||null),this},E.readPixels=function(t){return void 0===t&&(t={}),n.f.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null},E.readPixelsToBuffer=function(t){return void 0===t&&(t={}),n.f.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null},E.copyToDataUrl=function(t){return void 0===t&&(t={}),n.f.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null},E.copyToImage=function(t){return void 0===t&&(t={}),n.f.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null},E.copyToTexture=function(t){return void 0===t&&(t={}),n.f.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null},E.blit=function(t){return void 0===t&&(t={}),n.f.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null},E.invalidate=function(t){var e=t.attachments,r=void 0===e?[]:e,n=t.x,i=void 0===n?0:n,s=t.y,o=void 0===s?0:s,u=t.width,c=t.height,f=this.gl;Object(h.a)(f);var l=f.bindFramebuffer(a.a.READ_FRAMEBUFFER,this.handle);return 0===i&&0===o&&void 0===u&&void 0===c?f.invalidateFramebuffer(a.a.READ_FRAMEBUFFER,r):f.invalidateFramebuffer(a.a.READ_FRAMEBUFFER,r,i,o,u,c),f.bindFramebuffer(a.a.READ_FRAMEBUFFER,l),this},E.getAttachmentParameter=function(t,e,r){var n=this._getAttachmentParameterFallback(e);return null===n&&(this.gl.bindFramebuffer(a.a.FRAMEBUFFER,this.handle),n=this.gl.getFramebufferAttachmentParameter(a.a.FRAMEBUFFER,t,e),this.gl.bindFramebuffer(a.a.FRAMEBUFFER,null)),r&&n>1e3&&(n=Object(l.a)(this.gl,n)),n},E.getAttachmentParameters=function(t,e,r){void 0===t&&(t=a.a.COLOR_ATTACHMENT0),void 0===r&&(r=this.constructor.ATTACHMENT_PARAMETERS||[]);for(var n,i={},s=g(r);!(n=s()).done;){var o=n.value;i[e?Object(l.a)(this.gl,o):o]=this.getAttachmentParameter(t,o,e)}return i},E.getParameters=function(t){void 0===t&&(t=!0);for(var e={},r=0,a=Object.keys(this.attachments);r<a.length;r++){var n=a[r],i=Number(n);e[t?Object(l.a)(this.gl,i):i]=this.getAttachmentParameters(i,t)}return e},E.show=function(){return"undefined"!=typeof window&&window.open(Object(c.a)(this),"luma-debug-texture"),this},E.log=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=""),t>n.f.level||"undefined"==typeof window)return this;e=e||"Framebuffer "+this.id;var r=Object(c.a)(this,{maxHeight:100});return n.f.image({logLevel:t,message:e,image:r},e)(),this},E.bind=function(t){var e=(void 0===t?{}:t).target,r=void 0===e?a.a.FRAMEBUFFER:e;return this.gl.bindFramebuffer(r,this.handle),this},E.unbind=function(t){var e=(void 0===t?{}:t).target,r=void 0===e?a.a.FRAMEBUFFER:e;return this.gl.bindFramebuffer(r,null),this},E._createDefaultAttachments=function(t,e,r,n,i){var u,c=null;t&&((c=c||{})[a.a.COLOR_ATTACHMENT0]=new s.a(this.gl,{id:this.id+"-color0",pixels:null,format:a.a.RGBA,type:a.a.UNSIGNED_BYTE,width:n,height:i,mipmaps:!1,parameters:(u={},u[a.a.TEXTURE_MIN_FILTER]=a.a.LINEAR,u[a.a.TEXTURE_MAG_FILTER]=a.a.LINEAR,u[a.a.TEXTURE_WRAP_S]=a.a.CLAMP_TO_EDGE,u[a.a.TEXTURE_WRAP_T]=a.a.CLAMP_TO_EDGE,u)}),this.ownResources.push(c[a.a.COLOR_ATTACHMENT0]));return e&&r?((c=c||{})[a.a.DEPTH_STENCIL_ATTACHMENT]=new o.a(this.gl,{id:this.id+"-depth-stencil",format:a.a.DEPTH24_STENCIL8,width:n,height:111}),this.ownResources.push(c[a.a.DEPTH_STENCIL_ATTACHMENT])):e?((c=c||{})[a.a.DEPTH_ATTACHMENT]=new o.a(this.gl,{id:this.id+"-depth",format:a.a.DEPTH_COMPONENT16,width:n,height:i}),this.ownResources.push(c[a.a.DEPTH_ATTACHMENT])):r&&Object(d.a)(!1),c},E._unattach=function(t){var e=this.attachments[t];e&&(e instanceof o.a?this.gl.framebufferRenderbuffer(a.a.FRAMEBUFFER,t,a.a.RENDERBUFFER,null):this.gl.framebufferTexture2D(a.a.FRAMEBUFFER,t,a.a.TEXTURE_2D,null,0),delete this.attachments[t])},E._attachRenderbuffer=function(t){var e=t.attachment,r=void 0===e?a.a.COLOR_ATTACHMENT0:e,n=t.renderbuffer;this.gl.framebufferRenderbuffer(a.a.FRAMEBUFFER,r,a.a.RENDERBUFFER,n.handle),this.attachments[r]=n},E._attachTexture=function(t){var e=t.attachment,r=void 0===e?a.a.COLOR_ATTACHMENT0:e,n=t.texture,i=t.layer,s=t.level,o=this.gl;switch(o.bindTexture(n.target,n.handle),n.target){case a.a.TEXTURE_2D_ARRAY:case a.a.TEXTURE_3D:o.framebufferTextureLayer(a.a.FRAMEBUFFER,r,n.target,s,i);break;case a.a.TEXTURE_CUBE_MAP:var u=function(t){return t<a.a.TEXTURE_CUBE_MAP_POSITIVE_X?t+a.a.TEXTURE_CUBE_MAP_POSITIVE_X:t}(i);o.framebufferTexture2D(a.a.FRAMEBUFFER,r,u,n.handle,s);break;case a.a.TEXTURE_2D:o.framebufferTexture2D(a.a.FRAMEBUFFER,r,a.a.TEXTURE_2D,n.handle,s);break;default:Object(d.a)(!1,"Illegal texture type")}o.bindTexture(n.target,null),this.attachments[r]=n},E._setReadBuffer=function(t){var e=this.gl;Object(n.e)(e)?e.readBuffer(t):Object(d.a)(t===a.a.COLOR_ATTACHMENT0||t===a.a.BACK,"Multiple render targets not supported"),this.readBuffer=t},E._setDrawBuffers=function(t){var e=this.gl;if(Object(n.e)(e))e.drawBuffers(t);else{var r=e.getExtension("WEBGL.draw_buffers");r?r.drawBuffersWEBGL(t):Object(d.a)(1===t.length&&(t[0]===a.a.COLOR_ATTACHMENT0||t[0]===a.a.BACK),"Multiple render targets not supported")}this.drawBuffers=t},E._getAttachmentParameterFallback=function(t){var e=Object(f.a)(this.gl);switch(t){case a.a.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:return e.WEBGL2?null:0;case a.a.FRAMEBUFFER_ATTACHMENT_RED_SIZE:case a.a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:case a.a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:case a.a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:case a.a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:case a.a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:return e.WEBGL2?null:8;case a.a.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:return e.WEBGL2?null:a.a.UNSIGNED_INT;case a.a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:return e.WEBGL2||e.EXT_sRGB?null:a.a.LINEAR;default:return null}},E._createHandle=function(){return this.gl.createFramebuffer()},E._deleteHandle=function(){this.gl.deleteFramebuffer(this.handle)},E._bindHandle=function(t){return this.gl.bindFramebuffer(a.a.FRAMEBUFFER,t)},_(i,[{key:"color",get:function(){return this.attachments[a.a.COLOR_ATTACHMENT0]||null}},{key:"texture",get:function(){return this.attachments[a.a.COLOR_ATTACHMENT0]||null}},{key:"depth",get:function(){return this.attachments[a.a.DEPTH_ATTACHMENT]||this.attachments[a.a.DEPTH_STENCIL_ATTACHMENT]||null}},{key:"stencil",get:function(){return this.attachments[a.a.STENCIL_ATTACHMENT]||this.attachments[a.a.DEPTH_STENCIL_ATTACHMENT]||null}}]),i}(i.a);function m(t){return(v.STATUS||{})[t]||"Framebuffer error "+t}var A=[a.a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME,a.a.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE,a.a.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING,a.a.FRAMEBUFFER_ATTACHMENT_RED_SIZE,a.a.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE,a.a.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE,a.a.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE,a.a.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE,a.a.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE];v.ATTACHMENT_PARAMETERS=A},n0hJ:function(t,e,r){var a=r("P8UN");a(a.P,"Array",{fill:r("Y++M")}),r("Dq1/")("fill")},rfXe:function(t,e,r){"use strict";r.d(e,"a",(function(){return g}));r("YBKJ"),r("9ZhD"),r("E5k/"),r("6kNP"),r("q8oJ"),r("8npG");var a=r("73Rc"),n=r("98Cc"),i=r("3LCa"),s=r("AFhB"),o=r("lHlH"),u=r("QenK"),c=r("3dIF"),f=r("BunF"),h=r("Iq2B");var l=[a.a.LINEAR,a.a.NEAREST],d=u.global.WebGLBuffer||function(){},g=function(t){var e,r;function n(e,r){var a,n=r.id,i=void 0===n?Object(f.c)("texture"):n,s=r.handle,o=r.target;return(a=t.call(this,e,{id:i,handle:s})||this).target=o,a.textureUnit=void 0,a.loaded=!1,a.width=void 0,a.height=void 0,a.depth=void 0,a.format=void 0,a.type=void 0,a.dataFormat=void 0,a.border=void 0,a.textureUnit=void 0,a.mipmaps=void 0,a}r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.isSupported=function(t,e){var r=void 0===e?{}:e,a=r.format,n=r.linearFiltering,i=!0;return a&&(i=(i=i&&Object(s.d)(t,a))&&(!n||Object(s.e)(t,a))),i};var u=n.prototype;return u.toString=function(){return"Texture("+this.id+","+this.width+"x"+this.height+")"},u.initialize=function(t){var e=this;void 0===t&&(t={});var r=t.data;if(r instanceof Promise)return r.then((function(r){return e.initialize(Object.assign({},t,{pixels:r,data:r}))})),this;var n=t,i=n.pixels,s=void 0===i?null:i,u=n.format,c=void 0===u?a.a.RGBA:u,f=n.border,h=void 0===f?0:f,l=n.recreate,d=void 0!==l&&l,g=n.parameters,E=void 0===g?{}:g,b=n.pixelStore,_=void 0===b?{}:b,v=n.textureUnit,m=void 0===v?void 0:v,A=t.mipmaps,T=void 0===A||A;r||(r=s);var p=t,R=p.width,y=p.height,F=p.dataFormat,O=p.type,I=t.depth,B=void 0===I?0:I,N=this._deduceParameters({format:c,type:O,dataFormat:F,compressed:!1,data:r,width:R,height:y});return R=N.width,y=N.height,F=N.dataFormat,O=N.type,this.width=R,this.height=y,this.depth=B,this.format=c,this.type=O,this.dataFormat=F,this.border=h,this.textureUnit=m,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(a.a.TEXTURE0+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),T&&this._isNPOT()&&(o.f.warn("texture: "+this+" is Non-Power-Of-Two, disabling mipmaping")(),T=!1,this._updateForNPOT(E)),this.mipmaps=T,this.setImageData({data:r,width:R,height:y,depth:B,format:c,type:O,dataFormat:F,border:h,mipmaps:T,parameters:_}),T&&this.generateMipmap(),this.setParameters(E),d&&(this.data=r),this},u.resize=function(t){var e=t.height,r=t.width,a=t.mipmaps,n=void 0!==a&&a;return r!==this.width||e!==this.height?this.initialize({width:r,height:e,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:n}):this},u.generateMipmap=function(t){var e=this;return void 0===t&&(t={}),this._isNPOT()?(o.f.warn("texture: "+this+" is Non-Power-Of-Two, disabling mipmaping")(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(o.k)(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)},u.setImageData=function(t){this._trackDeallocatedMemory("Texture");var e=t.target,r=void 0===e?this.target:e,n=t.pixels,i=void 0===n?null:n,u=t.level,f=void 0===u?0:u,l=t.format,d=void 0===l?this.format:l,g=t.border,E=void 0===g?this.border:g,b=t.offset,_=void 0===b?0:b,v=t.parameters,m=void 0===v?{}:v,A=t.data,T=void 0===A?null:A,p=t.type,R=void 0===p?this.type:p,y=t.width,F=void 0===y?this.width:y,O=t.height,I=void 0===O?this.height:O,B=t.dataFormat,N=void 0===B?this.dataFormat:B,L=t.compressed,U=void 0!==L&&L;T||(T=i);var S=this._deduceParameters({format:d,type:R,dataFormat:N,compressed:U,data:T,width:F,height:I});R=S.type,N=S.dataFormat,U=S.compressed,F=S.width,I=S.height;var w=this.gl;w.bindTexture(this.target,this.handle);var x,P=this._getDataType({data:T,compressed:U});if(T=P.data,x=P.dataType,Object(o.k)(this.gl,m,(function(){switch(x){case"null":w.texImage2D(r,f,d,F,I,E,N,R,T);break;case"typed-array":w.texImage2D(r,f,d,F,I,E,N,R,T,_);break;case"buffer":Object(c.a)(w),w.bindBuffer(a.a.PIXEL_UNPACK_BUFFER,T.handle||T),w.texImage2D(r,f,d,F,I,E,N,R,_),w.bindBuffer(a.a.PIXEL_UNPACK_BUFFER,null);break;case"browser-object":Object(o.e)(w)?w.texImage2D(r,f,d,F,I,E,N,R,T):w.texImage2D(r,f,d,N,R,T);break;case"compressed":w.compressedTexImage2D(r,f,d,F,I,E,T);break;default:Object(h.a)(!1,"Unknown image data type")}})),T&&T.byteLength)this._trackAllocatedMemory(T.byteLength,"Texture");else{var D=s.a[this.dataFormat]||4,M=s.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*D*M,"Texture")}return this.loaded=!0,this},u.setSubImageData=function(t){var e=this,r=t.target,n=void 0===r?this.target:r,s=t.pixels,u=void 0===s?null:s,f=t.data,l=void 0===f?null:f,g=t.x,E=void 0===g?0:g,b=t.y,_=void 0===b?0:b,v=t.width,m=void 0===v?this.width:v,A=t.height,T=void 0===A?this.height:A,p=t.level,R=void 0===p?0:p,y=t.format,F=void 0===y?this.format:y,O=t.type,I=void 0===O?this.type:O,B=t.dataFormat,N=void 0===B?this.dataFormat:B,L=t.compressed,U=void 0!==L&&L,S=t.offset,w=void 0===S?0:S,x=t.border,P=(void 0===x&&this.border,t.parameters),D=void 0===P?{}:P,M=this._deduceParameters({format:F,type:I,dataFormat:N,compressed:U,data:l,width:m,height:T});if(I=M.type,N=M.dataFormat,U=M.compressed,m=M.width,T=M.height,Object(h.a)(0===this.depth,"texSubImage not supported for 3D textures"),l||(l=u),l&&l.data){var C=l;l=C.data,m=C.shape[0],T=C.shape[1]}l instanceof i.a&&(l=l.handle),this.gl.bindTexture(this.target,this.handle),Object(o.k)(this.gl,D,(function(){U?e.gl.compressedTexSubImage2D(n,R,E,_,m,T,F,l):null===l?e.gl.texSubImage2D(n,R,E,_,m,T,N,I,null):ArrayBuffer.isView(l)?e.gl.texSubImage2D(n,R,E,_,m,T,N,I,l,w):l instanceof d?(Object(c.a)(e.gl),e.gl.bindBuffer(a.a.PIXEL_UNPACK_BUFFER,l),e.gl.texSubImage2D(n,R,E,_,m,T,N,I,w),e.gl.bindBuffer(a.a.PIXEL_UNPACK_BUFFER,null)):Object(o.e)(e.gl)?e.gl.texSubImage2D(n,R,E,_,m,T,N,I,l):e.gl.texSubImage2D(n,R,E,_,N,I,l)})),this.gl.bindTexture(this.target,null)},u.copyFramebuffer=function(t){return void 0===t&&(t={}),o.f.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null},u.getActiveUnit=function(){return this.gl.getParameter(a.a.ACTIVE_TEXTURE)-a.a.TEXTURE0},u.bind=function(t){void 0===t&&(t=this.textureUnit);var e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(e.TEXTURE0+t)),e.bindTexture(this.target,this.handle),t},u.unbind=function(t){void 0===t&&(t=this.textureUnit);var e=this.gl;return void 0!==t&&(this.textureUnit=t,e.activeTexture(e.TEXTURE0+t)),e.bindTexture(this.target,null),t},u._getDataType=function(t){var e=t.data,r=t.compressed;return void 0!==r&&r?{data:e,dataType:"compressed"}:null===e?{data:e,dataType:"null"}:ArrayBuffer.isView(e)?{data:e,dataType:"typed-array"}:e instanceof i.a?{data:e.handle,dataType:"buffer"}:e instanceof d?{data:e,dataType:"buffer"}:{data:e,dataType:"browser-object"}},u._deduceParameters=function(t){var e=t.format,r=t.data,a=t.width,n=t.height,i=t.dataFormat,o=t.type,u=t.compressed,c=s.b[e];i=i||c&&c.dataFormat,o=o||c&&c.types[0],u=u||c&&c.compressed;var f=this._deduceImageSize(r,a,n);return{dataFormat:i,type:o,compressed:u,width:a=f.width,height:n=f.height,format:e,data:r}},u._deduceImageSize=function(t,e,r){var a;return a="undefined"!=typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:r}:{width:e>=0?e:1,height:r>=0?r:1},Object(h.a)(a,"Could not deduced texture size"),Object(h.a)(void 0===e||a.width===e,"Deduced texture width does not match supplied width"),Object(h.a)(void 0===r||a.height===r,"Deduced texture height does not match supplied height"),a},u._createHandle=function(){return this.gl.createTexture()},u._deleteHandle=function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")},u._getParameter=function(t){switch(t){case a.a.TEXTURE_WIDTH:return this.width;case a.a.TEXTURE_HEIGHT:return this.height;default:this.gl.bindTexture(this.target,this.handle);var e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}},u._setParameter=function(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case a.a.TEXTURE_MIN_LOD:case a.a.TEXTURE_MAX_LOD:this.gl.texParameterf(this.handle,t,e);break;case a.a.TEXTURE_WIDTH:case a.a.TEXTURE_HEIGHT:Object(h.a)(!1);break;default:this.gl.texParameteri(this.target,t,e)}return this.gl.bindTexture(this.target,null),this},u._isNPOT=function(){return!Object(o.e)(this.gl)&&(!(!this.width||!this.height)&&(!Object(f.b)(this.width)||!Object(f.b)(this.height)))},u._updateForNPOT=function(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)},u._getNPOTParam=function(t,e){if(this._isNPOT())switch(t){case a.a.TEXTURE_MIN_FILTER:-1===l.indexOf(e)&&(e=a.a.LINEAR);break;case a.a.TEXTURE_WRAP_S:case a.a.TEXTURE_WRAP_T:e!==a.a.CLAMP_TO_EDGE&&(e=a.a.CLAMP_TO_EDGE)}return e},n}(n.a)},viZF:function(t,e,r){"use strict";r.d(e,"a",(function(){return c}));r("ofTv"),r("E5k/");var a=r("73Rc"),n=r("lHlH"),i=r("3dIF"),s=r("rfXe"),o=r("AFhB"),u=r("3LCa");var c=function(t){var e,r;function s(e,r){var n;return void 0===r&&(r={}),Object(i.a)(e),r=Object.assign({depth:1},r,{target:a.a.TEXTURE_3D,unpackFlipY:!1}),(n=t.call(this,e,r)||this).initialize(r),Object.seal(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(n)),n}return r=t,(e=s).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,s.isSupported=function(t){return Object(n.e)(t)},s.prototype.setImageData=function(t){var e=this,r=t.level,i=void 0===r?0:r,s=t.dataFormat,c=void 0===s?a.a.RGBA:s,f=t.width,h=t.height,l=t.depth,d=void 0===l?1:l,g=t.border,E=void 0===g?0:g,b=t.format,_=t.type,v=void 0===_?a.a.UNSIGNED_BYTE:_,m=t.offset,A=void 0===m?0:m,T=t.data,p=t.parameters,R=void 0===p?{}:p;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(n.k)(this.gl,R,(function(){ArrayBuffer.isView(T)&&e.gl.texImage3D(e.target,i,c,f,h,d,E,b,v,T),T instanceof u.a&&(e.gl.bindBuffer(a.a.PIXEL_UNPACK_BUFFER,T.handle),e.gl.texImage3D(e.target,i,c,f,h,d,E,b,v,A))})),T&&T.byteLength)this._trackAllocatedMemory(T.byteLength,"Texture");else{var y=o.a[this.dataFormat]||4,F=o.c[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*y*F,"Texture")}return this.loaded=!0,this},s}(s.a)}}]);